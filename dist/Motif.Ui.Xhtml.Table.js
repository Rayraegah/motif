Motif.Page.include("Motif.Collections.List.js"),Motif.Ui.Xhtml.Table=function(){this.inheritFrom=Motif.Object,this.inheritFrom(),this.element=null,this._tbody=null,this.addRow=function(){var e=document.createElement("tr");return this.fireEvent("onbeforeaddrow",[e]),this._tbody.appendChild(e),this.fireEvent("onaddrow",[e]),e},this.insertRow=function(e){var t=this.getRow(e),n=document.createElement("tr");return this.fireEvent("onbeforeinsertrow",[n]),this._tbody.insertBefore(n,t),this.fireEvent("oninsertrow",[n]),n},this.removeRow=function(e){var t=this.getRow(e);this.fireEvent("onbeforeremoverow",[t]),this._tbody.removeChild(t),this.fireEvent("onremoverow",[t])},this.rowExists=function(e){var t=this.getRows();return e>-1&&e<t.length},this.getRow=function(e){var t=this.getRows();if(0>e&&e>=t.length)throw new Error("Motif.Ui.Elements.HtmlTable.getRow: Index out of range.");return t[e]},this.getRows=function(){for(var e=this._tbody.getElementsByTagName("tr"),t=[],n=0;n<e.length;n++)t.push(e[n]);return t},this.addCell=function(e){var t=this.getRow(e),n=document.createElement("td");return this.fireEvent("onbeforeaddcell",[n]),t.appendChild(n),this.fireEvent("onaddcell",[n]),n},this.insertCell=function(e,t){var n=this.getRow(e),o=this.getCell(e,t),i=document.createElement("td");return this.fireEvent("onbeforeinsertcell",[i]),n.insertBefore(i,o),this.fireEvent("oninsertcell",[n]),i},this.removeCell=function(e,t){var n=this.getRow(e),o=this.getCell(e,t);this.fireEvent("onbeforeremovecell",[o]),n.removeChild(o),this.fireEvent("onremoverow",[n])},this.cellExists=function(e,t){var n=this.getCells(e);return t>-1&&t<n.length},this.getCell=function(e,t){var n=this.getCells(e);if(0>t&&t>=n.length)throw new Error("Motif.Ui.Elements.HtmlTable.getCell: Index out of range.");return n[t]},this.getCells=function(e){var t=[],n=this.getRow(e);if(n)for(var o=0;o<n.childNodes;o++)1==n.childNodes[o].nodeType&&"td"==n.childNodes[o].nodeName.toLowerCase()&&t.push(n.childNodes[o]);return t},this.sort=function(e){var t=this.getRows(),n="var a1 = a && a.getElementsByTagName && a.getElementsByTagName('td')["+e+"]? a.getElementsByTagName('td')["+e+"].innerHTML: '';var b1 = b && b.getElementsByTagName && b.getElementsByTagName('td')["+e+"]? b.getElementsByTagName('td')["+e+"].innerHTML: '';if(a1 < b1){return -1;}if(a1 > b1){return 1;}return 0;",o=new Function("a","b",n);for(Motif.Page.log.write("Motif.Ui.Elements.HtmlTable.sort: Sorting rows ("+this.getRows().length+") with '"+n+"'."),t.sort(o);this._tbody.childNodes.length>0;)this._tbody.removeChild(this._tbody.childNodes[0]);for(var i=0;i<t.length;i++)this._tbody.appendChild(t[i])},this.setElement=function(e){if(!Motif.Type.isElement(e))throw new Error("Motif.Ui.Elements.HtmlTable.setElement: Wrong parameter type, HtmlElement expected.");if("table"!=e.tagName.toLowerCase())throw new Error("Motif.Ui.Elements.HtmlTable.setElement: Wrong element type '"+e.tagName+"'");0==e.getElementsByTagName("tbody").length&&e.appendChild(document.createElement("tbody")),this.element=e,this._tbody=e.getElementsByTagName("tbody")[0]},this.load=function(e){Motif.Page.log.write("Motif.Ui.Elements.HtmlTable.load: Loading element from document."),this.element=e},this.onbeforeaddrow=function(){},this.onaddrow=function(){},this.onbeforeinsertrow=function(){},this.oninsertrow=function(){},this.onbeforedeleterow=function(){},this.ondeleterow=function(){},this.onbeforeaddcell=function(){},this.onaddcell=function(){},this.onbeforeinsertcell=function(){},this.oninsertcell=function(){},this.onbeforedeletecell=function(){},this.ondeletecell=function(){},this.main=function(){this.element=document.createElement("table"),this._tbody=this.table.appendChild(document.createElement("tbody"))}};
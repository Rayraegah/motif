Motif.Page.include("Motif.Ui.Controls.Control.js"),Motif.Page.include("Motif.Collections.Hashtable.js"),Motif.Page.include("Motif.Ui.Controls.TabPage.js"),Motif.Page.include("Motif.Ui.Css.js"),Motif.Ui.Controls.TabPane=function(t){Motif.Utility.extend(this,"Motif.Ui.Controls.Control"),this.__class.push("Motif.Ui.Controls.TabPane"),this.pages=new Motif.Collections.Hashtable,this.strip=null,this.active=null,this.add=function(t){this.pages.set(t.getTitle(),t),t.hide(),t.clearEvent("onbuttonclick"),t.clearEvent("onhide"),t.attachEvent("onbuttonclick",new Function(this.referenceString()+'.activate("'+t.getTitle()+'")')),t.attachEvent("onhide",new Function(this.referenceString()+"._showActivePage()")),this.element.appendChild(t.element),this.strip.appendChild(t.button)},this.remove=function(t){if(pages.contains(t)){var i=pages.remove(t);return i.destroy(),i}return null},this.removeAll=function(){for(e in this.pages.item)this.pages.item[e].destroy();return this.pages.removeAll()},this.activate=function(t){if(!this.pages.contains(t))throw new Error("Motif.Ui.Controls.TabPane.activate: Can't activate a non existing page.");var i=this.pages.get(t);if(i!==this.active){this.fireEvent("onbeforeactivate",[i]);var e=this.active;return this.active=i,null!=e?(e.hide(),Motif.Ui.Css.removeClassName(this.active.button,"Active"),i):(this._showActivePage(),i)}},this.activateFirstPage=function(){var t=this.pages.getKeys()[0];"undefined"!=typeof t?this.activate(t):this.attachEvent("onaddpage",this._activateFirstPage)},this._activateFirstPage=function(){Motif.Page.log.write("Motif.Ui.Control.TabPane._activateFirstPage: Showing first page and removing handler."),this.activateFirstPage(),this.detachEvent("onaddpage",this._activateFirstPage)},this._showActivePage=function(){null!=this.active&&(this.active.show(),Motif.Ui.Css.addClassName(this.active.button,"Active"),this.fireEvent("onactivate",[this.active]))},this.setElement=function(t){this.Motif$Ui$Controls$Control.setElement(t),this.element.appendChild(this.strip)},this.load=function(t){for(var i=[];t.childNodes.length>0;){var e=t.removeChild(t.childNodes[0]);1==e.nodeType&&"Motif.Ui.Controls.TabPage"==e.getAttribute("motifClass")&&(e.removeAttribute("motifClass"),i.push(e))}Motif.Page.log.write("Motif.Ui.Controls.TabPane.load: Found '"+i.length.toString()+"' TabPages."),this.Motif$Ui$Controls$Control.load(t,!1);for(var n=0;n<i.length;n++){var a=new Motif.Ui.Controls.TabPage;a.load(i[n]),this.add(a)}return this.configure(t.getAttribute("config")),t},this.configure=function(t){return t=this.Motif$Ui$Controls$Control.configure(t),t.activateFirstPage===!0&&this.activateFirstPage(),t},this.onbeforeactivate=function(t){},this.onactivate=function(t){},this.onremovepage=function(){},this.onaddpage=function(){},this.main=function(t){this.strip=document.createElement("div"),this.strip.className="Motif-Ui-Controls-TabStrip",t&&this.configure(t),this.pages.attachEvent("onadd",new Function("page",this.referenceString()+'.fireEvent("onaddpage", [page]);')),this.pages.attachEvent("onremove",new Function("page",this.referenceString()+'.fireEvent("onremovepage", [page]);'))},this.main(t)};
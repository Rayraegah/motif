Motif.Page.include("Motif.Drawing.Rectangle.js"),Motif.Page.include("Motif.Drawing.Point.js"),Motif.Page.include("Motif.Ui.Css.js"),Motif.Page.include("Motif.Ui.Utility.js"),Motif.Page.include("Motif.Ui.Xhtml.BlockElements.js"),Motif.Page.include("Motif.Ui.Controls.Event.js"),Motif.Page.include("Motif.Dom.Utility.js"),Motif.Ui.Controls.Control=function(config){Motif.Utility.extend(this,"Motif.Object"),this.__class.push("Motif.Ui.Controls.Control"),this.animation=null,this.element=null,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.minLeft=null,this.maxLeft=null,this.minTop=null,this.maxTop=null,this.setElement=function(t){Motif.Page.log.write("Motif.Ui.Controls.Control.setElement: Binding the element to this control object.");var e=this.fireEvent("onbeforesetelement",[t]);e&&e!=t&&(Motif.Page.log.write("Motif.Ui.Controls.Control.setElement: New element from onbeforesetelement."),null!=t.parentNode&&t.parentNode.replaceChild(e,t),t=e),this.element=t,this.animation&&this.animation.configure({element:this.element,status:"none"==Motif.Ui.Css.getCurrentStyle(this.element,"display")?0:100}),this.element.setAttribute("motifptr",this.ptr.toString());var i=this.getCssClassName();return Motif.Ui.Css.containsClassName(this.element,i)||Motif.Ui.Css.addClassName(this.element,i),this._addEvents(),this.fireEvent("onsetelement",[t]),t},this.createElement=function(){return document.createElement("div")},this.create=function(){this.setElement(this.createElement())},this.getId=function(){return this.element.id},this.setId=function(t){this.element.id=t},this.getCssClassName=function(){return this.getType().replace(/\./g,"-")},this._addEvents=function(t){t=t||this.element;for(evt in Motif.Ui.Controls.UserEvents)Motif.Utility.attachEvent(t,evt,new Function("e","e=e||event;"+this.referenceString()+'.fireEvent("'+evt+'", [new Motif.Ui.Controls.Event({event:e, control: '+this.referenceString()+', type:"'+evt+'"})]);'));for(evt in Motif.Ui.Controls.KeyEvents)Motif.Utility.attachEvent(t,evt,new Function("e","e=e||event;"+this.referenceString()+'.fireEvent("'+evt+'", [new Motif.Ui.Controls.KeyEvent({event:e, control: '+this.referenceString()+', type:"'+evt+'"})]);'));for(evt in Motif.Ui.Controls.MouseEvents)Motif.Utility.attachEvent(t,evt,new Function("e","e=e||event;"+this.referenceString()+'.fireEvent("'+evt+'", [new Motif.Ui.Controls.MouseEvent({event:e, control: '+this.referenceString()+', type:"'+evt+'"})]);'));Motif.BrowserInfo.gecko&&Motif.Utility.attachEvent(t,"onDOMMouseScroll",new Function("e","e=e||event;"+this.referenceString()+'.fireEvent("onmousewheel", [new Motif.Ui.Controls.MouseEvent({event:e, control: '+this.referenceString()+', type:"onmousewheel"})]);'))},this.getParentControl=function(){for(var t=this.parentNode;null!=t;){if(null!=t.getAttribute("motifptr"))return Motif.Register.objects[parseInt(t.getAttribute("motifptr"))];t=t.parentNode}return null},this.getChildControls=function(){var t=Motif.Dom.Utility.getChildElements(this.element,"*"),i=[];for(e in t)null!=t[e].getAttribute("motifptr")&&i.push(Motif.ObjectRegistry.objects[parseInt(t[e].getAttribute("motifptr"))]);return i},this.open=function(t,e){t||(t=document.body),t.element&&(t=t.element),this.fireEvent("onbeforeopen"),(e===!0||e===!1)&&(this.element.style.display=e?"none":this.element.tagName.toLowerCase()in Motif.Ui.Xhtml.BlockElements?"block":"inline"),t.appendChild(this.element),this.fireEvent("onopen")},this.close=function(){null!=this.element.parentNode&&(this.fireEvent("onbeforeclose"),null!=this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.fireEvent("onclose"))},this.show=function(t){if("none"==this.element.style.display){if(null!=this.animation&&t!==!0)return void this._showAnimated();this.fireEvent("onbeforeshow"),this.element.style.display=this.element.tagName.toLowerCase()in Motif.Ui.Xhtml.BlockElements?"block":"inline",this.fireEvent("onshow")}},this.hide=function(t){if("none"!=this.element.style.display){if(null!=this.animation&&t!==!0)return void this._hideAnimated();this.fireEvent("onbeforeshide"),this.element.style.display="none",this.fireEvent("onhide")}},this.toggle=function(){"none"==this.element.style.display?this.show():this.hide()},this._showAnimated=function(){return null==this.animation?void this.show():this.animation.isPlaying?(this.animation.pause(),this.animation.increment=1,void this.animation.play()):(this.fireEvent("onbeforeshow"),this.animation.increment=1,this.animation.setStatus(1),this.element.style.display=this.element.tagName.toLowerCase()in Motif.Ui.Xhtml.BlockElements?"block":"inline",void this.animation.play())},this._hideAnimated=function(){return null==this.animation?void this.show():this.animation.isPlaying?(this.animation.pause(),this.animation.increment=-1,void this.animation.play()):(this.fireEvent("onbeforehide"),this.animation.increment=-1,this.animation.setStatus(99),void this.animation.play())},this.setAnimation=function Control_setAnimation(classString){if(!Motif.Type.isString(classString))throw new Error("Motif.Ui.Controls.Control.setAnimation: String type expected as class definition.");try{eval("this.animation = new "+classString)}catch(x){throw new Error("Motif.Ui.Controls.Control.setAnimation: Failed to set animation to '"+classString+"'.\r\n"+x)}var config={status:"none"==Motif.Ui.Css.getCurrentStyle(this.element,"display")?0:100,element:this.element};Motif.Page.log.write("Motif.Ui.Controls.Control.setAnimation: Configuring animation for this control, supplying status and element."),this.animation.configure(config),this.animation.attachEvent("oncomplete",new Function(this.referenceString()+"._animationComplete();"))},this._animationComplete=function(){1==this.animation.increment?this.fireEvent("onshow"):(this.element.style.display="none",this.fireEvent("onhide"))},this.resize=function(t,e){if("undefined"!=typeof t||"undefined"!=typeof e){if(t=parseInt(t),e=parseInt(e),isNaN(t)&&isNaN(e))throw new Error("Motif.Ui.Controls.Control.resize: Incorrect parameter specified, w="+t+"; h="+e+";");if(t=this._widthByRange(t),e=this._heightByRange(e),t!=this.getWidth()||e!=this.getHeight()){this.fireEvent("onbeforeresize",[t,e]);var i=";";isNaN(t)||(i+="width: "+t.toString()+"px;"),isNaN(e)||(i+="height: "+e.toString()+"px;"),";"!=i&&(this.element.style.cssText+=i),this.fireEvent("onresize",[t,e])}}},this._heightByRange=function(t){return null!=this.minHeight&&t<this.minHeight&&(t=this.minHeight),null!=this.maxHeight&&t<this.maxHeight&&(t=this.maxHeight),t},this._widthByRange=function(t){return null!=this.maxWidth&&t>this.maxWidth&&(t=this.maxWidth),null!=this.minWidth&&t<this.minWidth&&(t=this.minWidth),t},this.setWidth=function(t){if(!Motif.Type.isNumber(t))throw new Error("Motif.Ui.Controls.Control.setWidth: Wrong parameter type, expected Number");t=this._widthByRange(t),this.element.style.width=t.toString()+"px"},this.getWidth=function(){if(this.element.style.width)return Motif.Convert.toInt(this.element.style.width);var t=Motif.Ui.Utility.getRectangle(this.element);return t.w},this.setHeight=function(t){if(!Motif.Type.isNumber(t))throw new Error("Motif.Ui.Controls.Control.setWidth: Wrong parameter type, expected Number");t=this._heightByRange(t),this.element.style.height=t.toString()+"px"},this.getHeight=function(){if(this.element.style.height)return Motif.Convert.toInt(this.element.style.height);var t=Motif.Ui.Utility.getRectangle(this.element);return t.h},this.move=function(t,e){if("undefined"!=typeof t||"undefined"!=typeof e){if(t=parseInt(t),e=parseInt(e),isNaN(t)&&isNaN(e))throw new Error("Motif.Ui.Controls.Control.resize: Incorrect parameter specified, x="+t+"; y="+e+";");if(t=this._leftByRange(t),e=this._topByRange(e),t!=this.getLeft()||e!=this.getTop()){this.fireEvent("onbeforeremove",[t,e]);var i=";";isNaN(t)||(i+="left:"+t.toString()+"px;"),isNaN(e)||(i+="top:"+e.toString()+"px;"),";"!=i&&(this.element.style.cssText+=i),this.fireEvent("onmove",[t,e])}}},this.setCssText=function(t){return this.element.style.cssText+=";"+t,this},this._leftByRange=function(t){return null!=this.maxLeft&&t>this.maxLeft&&(t=this.maxLeft),null!=this.minLeft&&t<this.minLeft&&(t=this.minLeft),t},this._topByRange=function(t){return null!=this.minTop&&t<this.minTop&&(t=this.minTop),null!=this.maxTop&&t<this.maxTop&&(t=this.maxTop),t},this.setTop=function(t){if(!Motif.Type.isNumber(t))throw new Error("Motif.Ui.Controls.Control.setTop: Wrong parameter type, expected Number");null!=this.maxTop&&t>this.maxTop||null!=this.minTop&&t<this.minTop||(this.element.style.top=t.toString()+"px")},this.getTop=function(){return Motif.Convert.toInt(this.element.style.top)},this.setLeft=function(t){if(!Motif.Type.isNumber(t))throw new Error("Motif.Ui.Controls.Control.setLeft: Wrong parameter type, expected Number");null!=this.minLeft&&t<this.minLeft||null!=this.maxLeft&&t>this.maxLeft||(this.element.style.left=t.toString()+"px")},this.getLeft=function(){return Motif.Convert.toInt(this.element.style.left)},this.getRectangle=function(){return Motif.Ui.Utility.getRectangle(this.element)},this.getOuterRectangle=function(){return Motif.Ui.Utility.getOuterRectangle(this.element)},this.setRectangle=function(t){Motif.Ui.Utility.setRectangle(this.element,t)},this.load=function(t,e){this.fireEvent("onbeforeload",[t]);var i=this.setElement(t);return e!==!1&&this.configure(t.getAttribute("config")),this.fireEvent("onload",[i]),i},this.configure=function(t){return t=this.Motif$Object.configure(t),Motif.Page.log.write("Motif.Ui.Controls.Control.configure: Setting the control specific items from config."),Motif.Type.isElement(t.element)&&(t.element=this.setElement(t.element)),Motif.Type.isString(t.animation)&&this.setAnimation(t.animation),t.animationConfig&&this.animation.configure(t.animationConfig),Motif.Type.isNumber(t.maxWidth)&&(this.maxWidth=t.maxWidth),Motif.Type.isNumber(t.maxHeight)&&(this.maxHeight=t.maxHeight),Motif.Type.isNumber(t.minWidth)&&(this.minWidth=t.minWidth),Motif.Type.isNumber(t.minHeight)&&(this.minHeight=t.minHeight),Motif.Type.isNumber(t.maxLeft)&&(this.maxLeft=t.maxLeft),Motif.Type.isNumber(t.maxTop)&&(this.maxTop=t.maxTop),Motif.Type.isNumber(t.minLeft)&&(this.minLeft=t.minLeft),Motif.Type.isNumber(t.minTop)&&(this.minTop=t.minTop),null==this.element?t:(Motif.Type.isString(t.id)&&this.setId(t.id),Motif.Type.isNumber(t.width)&&(this.element.style.width=t.width.toString()+"px"),Motif.Type.isNumber(t.height)&&(this.element.style.height=t.height.toString()+"px"),Motif.Type.isNumber(t.left)&&(this.element.style.left=t.left.toString()+"px"),Motif.Type.isNumber(t.top)&&(this.element.style.top=t.top.toString()+"px"),Motif.Type.isBoolean(t.visible)&&(t.visible?this.element.style.display=this.element.tagName.toLowerCase()in Motif.Ui.Xhtml.BlockElements?"block":"inline":this.element.style.display="none"),t)},this.isBound=function(){for(var t=this.element;null!=t;){if("body"==t.nodeName.toLowerCase())return!0;t=t.parentNode}return!1},this.onbeforeload=function(){},this.onload=function(){},this.onloadtree=function(){},this.onbeforesetelement=function(){},this.onsetelement=function(){},this.onbeforeopen=function(){},this.onopen=function(){},this.onbeforeclose=function(){},this.onclose=function(){},this.onbeforeshow=function(){},this.onshow=function(){},this.onbeforehide=function(){},this.onhide=function(){},this.onblur=function(){},this.onclick=function(){},this.oncontextmenu=function(){},this.ondblclick=function(){},this.ondrag=function(){},this.ondragend=function(){},this.ondragenter=function(){},this.ondragleave=function(){},this.ondragover=function(){},this.ondragstart=function(){},this.ondrop=function(){},this.onfocus=function(){},this.onhelp=function(){},this.onkeydown=function(){},this.onkeypress=function(){},this.onkeyup=function(){},this.onmousedown=function(){},this.onmousemove=function(){},this.onmouseout=function(){},this.onmouseover=function(){},this.onmouseup=function(){},this.onmousewheel=function(){},this.onmove=function(){},this.onmoveend=function(){},this.onmovestart=function(){},this.onresize=function(){},this.onresizeend=function(){},this.onresizestart=function(){},this.onscroll=function(){},this.onselectstart=function(){},this.main=function(t){t&&this.configure(t)},this.main(config)},Motif.Ui.Controls.ControlConfig=function(){this.element=null,this.animation="",this.animationConfig={},this.maxWidth=0,this.maxHeight=0,this.minWidth=0,this.minHeight=0,this.maxLeft=0,this.maxTop=0,this.minLeft=0,this.minTop=0,this.width=0,this.height=0,this.left=0,this.top=0,this.visible=!1};
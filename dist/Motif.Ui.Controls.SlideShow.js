Motif.Page.include("Motif.Ui.Controls.Control.js"),Motif.Page.include("Motif.Collections.List.js"),Motif.Ui.Controls.SlideShow=function(t){Motif.Utility.extend(this,"Motif.Ui.Controls.Control"),this.__class.push("Motif.Ui.Controls.SlideShow"),this._handlers={},this._timer=null,this.loop=!1,this.duration=3e3,this.current=-1,this.showfirst=!0,this.hidelast=!1,this.isPlaying=!1,this.items=new Motif.Collections.List,this.add=function(t){return t.hide(!0),t.attachEvent("onhide",this._handlers.onhide),this.items.add(t),t},this.remove=function(t){var i=this.items.remove(t);return i.attachEvent("onhide",this._handlers.onhide),i.close(),i},this.removeAll=function(){var t=this.items.removeAll();for(e in t)control.detachEvent("onhide",this._handlers.onhide),t[e].close();return t},this.setCurrent=function(t){Motif.Page.log.write("Motif.Ui.Controls.SlideShow.setCurrent: Setting the current to '"+t+"'.");var i=this.items.getItem(t,null);if(null==i)throw new Error("Motif.Ui.Controls.SlideShow.setCurrent: Index out of range.");this.fireEvent("onbeforechange",[this.current,t]);var e=this.getCurrent();this.current=t,null!=e?e.hide():(e=this.getCurrent(),null!=e&&e.show()),this.fireEvent("onchange",[this.current])},this.getCurrent=function(){return this.items.getItem(this.current,null)},this.play=function(t){return this.duration=t||this.duration,this.isPlaying!==!0?(this.fireEvent("onplaystart"),this._doPlay(),this):void 0},this._doPlay=function(){var t=this.current+1;t>this.items.count-1&&(t=this.loop===!0?0:-1),-1!=t?(this.setCurrent(t),this._timer=setTimeout(this.referenceString()+"._doPlay();",this.duration),this.fireEvent("onplaynext")):this.fireEvent("onplayend")},this.pause=function(){this.isPlaying=!1,clearTimeout(this._timer),this._timer=null},this.stop=function(){this.isPlaying!==!1&&(this.isPlaying=!1,clearTimeout(this._timer),this._timer=null,this.reset())},this.next=function(){var t=this.current+1;return t>this.items.count-1&&(t=this.loop===!0?0:this.items.count-1),this.setCurrent(t),this},this.previous=function(){var t=this.current-1;return 0>t&&(t=this.loop===!0?this.items.count-1:0),this.setCurrent(t),this},this.toggleLoop=function(){return this.loop=this.loop!==!0,this},this.reverse=function(){return this.items.reverse(),this},this.reset=function(){var t=this.getCurrent(),i=this.items.getItem(0,null);null!=t&&(t.detachEvent("onhide",this._handlers.onhide),t.hide(!0),t.attachEvent("onhide",this._handlers.onhide)),this.showfirst===!0&&null!=i&&i.show(!0),this.current=0},this.configure=function(t){return Motif.Page.log.write("Motif.Ui.Controls.MenuItem.configure: Configuring menu item."),t=this.Motif$Object.configure(t),t.showfirst===!0&&this.setCurrent(0),Motif.Type.isBoolean(t.loop)&&(this.loop=t.loop),Motif.Type.isBoolean(t.hidelast)&&(this.hidelast=t.hidelast),Motif.Type.isNumber(t.duration)&&(this.duration=t.duration),Motif.Type.isBoolean(t.autoplay)&&this.play(),t},this.load=function(t){return t=this.Motif$Ui$Controls$Control.load(t,!1)},this._onloadtree=function(){for(var t=this.getChildControls(),i=0;i<t.length;i++)this.add(t[i]);var e=this.element.getAttribute("config");e&&this.configure(e)},this._onhidecontrol=function(){var t=this.getCurrent();null!=t&&t.show()},this.main=function(t){t&&this.configure(t),this._handlers.onhide=new Function(this.referenceString()+"._onhidecontrol();"),this._handlers.onloadtree=new Function(this.referenceString()+"._onloadtree();"),this.attachEvent("onloadtree",this._handlers.onloadtree)},this.main(t)},Motif.Ui.Controls.SlideShowConfig=function(){this.current=-1,this.autoplay=!1,this.duration=0,this.hidelast=!1,this.showfirst=!1};
Motif.Page.include("Motif.Ui.Css.js"),Motif.Page.include("Motif.Drawing.Rectangle.js"),Motif.Page.include("Motif.Ui.Xhtml.BlockElements.js"),Motif.Page.include("Motif.Ui.Devices.Screen.js"),Motif.Ui.Utility={_elementText:null,_swfObjects:[],getCarretPosition:function(t){return t.selectionStart?t.selectionStart:document.selection?Math.abs(document.selection.createRange().moveStart("character",-1e6)):0},getTextMetrics:function(t,e){return this._elementText||(this._elementText=document.createElement("div"),this._elementText.style.position="absolute",this._elementText.style.visibility="hidden",this._elementText.style.top=elm.style.left="-2500px",document.body.appendChild(this._elementText)),this._elementText.style.width="auto",e&&!isNaN(e)&&(this._elementText.style.width=e.toString()+"px"),this._elementText.innerHTML=t,{w:this._elementText.clientWidth,h:this._elementText.clientHeight}},getElementMask:function(t){var e=this.getRectangle(t),i=document.createElement("div");return this.setRectangle(i,e),i.style.position="absolute",i.style.border="solid #AAAAAA 1px",i.style.background="#FFFFFF",i},getOffsetPosition:function(t){for(var e={x:0,y:0},i=t;null!=i;){isNaN(i.offsetLeft)||(e.x+=i.offsetLeft),isNaN(i.offsetTop)||(e.y+=i.offsetTop);try{i=i.offsetParent}catch(n){i=null}}return e},getStylePosition:function(t){if("absolute"!=Motif.Ui.Css.getCurrentStyle(t,"position"))return{x:0,y:0};var e={x:Motif.Ui.Css.getCurrentStyle(t,"left"),y:Motif.Ui.Css.getCurrentStyle(t,"top")};return e.x=-1==e.x.indexOf("px")?0:parseInt(e.x),e.y=-1==e.y.indexOf("px")?0:parseInt(e.y),e},getClientPosition:function(t){var e={x:0,y:0},i=t.getClientRects();return i&&i.length>0&&(e.x=i[0].left,e.y=i[0].top),e},getOffsetDimension:function(t){var e={w:0,h:0};return e.w=t.offsetWidth,e.h=t.offsetHeight,e},getStyleDimension:function(t){var e={w:Motif.Ui.Css.getCurrentStyle(t,"width"),h:Motif.Ui.Css.getCurrentStyle(t,"height")};return e.w=-1==e.w.indexOf("px")?0:parseInt(e.w),e.h=-1==e.h.indexOf("px")?0:parseInt(e.h),e},getClientDimension:function(t){var e={w:0,h:0},i=t.getClientRects();if(i&&i.length>0){var n=i[0].top;e.h=i[i.length-1].bottom-n;for(var o=0,l=i.length;l>o;o++){var s=i[o].right-i[o].left;s>e.w&&(e.w=s)}}return e},getBorderSize:function(t){var e={top:null,right:null,bottom:null,left:null};return e.top=Motif.Ui.Css.getCurrentStyle(t,"border-top-width"),e.right=Motif.Ui.Css.getCurrentStyle(t,"border-right-width"),e.bottom=Motif.Ui.Css.getCurrentStyle(t,"border-bottom-width"),e.left=Motif.Ui.Css.getCurrentStyle(t,"border-left-width"),e.top=-1==e.top.indexOf("px")?0:parseInt(e.top),e.right=-1==e.right.indexOf("px")?0:parseInt(e.right),e.bottom=-1==e.bottom.indexOf("px")?0:parseInt(e.bottom),e.left=-1==e.left.indexOf("px")?0:parseInt(e.left),e},getPaddingSize:function(t){var e={top:null,right:null,bottom:null,left:null};return e.top=Motif.Ui.Css.getCurrentStyle(t,"padding-top"),e.right=Motif.Ui.Css.getCurrentStyle(t,"padding-right"),e.bottom=Motif.Ui.Css.getCurrentStyle(t,"padding-bottom"),e.left=Motif.Ui.Css.getCurrentStyle(t,"padding-left"),e.top=-1==e.top.indexOf("px")?0:parseInt(e.top),e.right=-1==e.right.indexOf("px")?0:parseInt(e.right),e.bottom=-1==e.bottom.indexOf("px")?0:parseInt(e.bottom),e.left=-1==e.left.indexOf("px")?0:parseInt(e.left),e},getMarginSize:function(t){var e={top:null,right:null,bottom:null,left:null};return e.top=Motif.Ui.Css.getCurrentStyle(t,"margin-top"),e.right=Motif.Ui.Css.getCurrentStyle(t,"margin-right"),e.bottom=Motif.Ui.Css.getCurrentStyle(t,"margin-bottom"),e.left=Motif.Ui.Css.getCurrentStyle(t,"margin-left"),e.top=-1==e.top.indexOf("px")?0:parseInt(e.top),e.right=-1==e.right.indexOf("px")?0:parseInt(e.right),e.bottom=-1==e.bottom.indexOf("px")?0:parseInt(e.bottom),e.left=-1==e.left.indexOf("px")?0:parseInt(e.left),e},getRectangle:function(t){if(!Motif.Type.isElement(t))throw new Error("Motif.Ui.Utility.getRectangle: Incorrect parameter specified, expected HTMLElement");var e={display:Motif.Ui.Css.getCurrentStyle(t,"display"),visibility:Motif.Ui.Css.getCurrentStyle(t,"visibility")};"none"==e.display&&(t.style.visibility="hidden",t.style.display=t.nodeName.toLowerCase()in Motif.Ui.Xhtml.BlockElements?"block":"inline");var i=Motif.Ui.Utility.getStylePosition(t);(0==i.x||0==i.y)&&(i=Motif.Ui.Utility.getClientPosition(t)),(0==i.x||0==i.y)&&(i=Motif.Ui.Utility.getOffsetPosition(t)),i.x+=Motif.Ui.Devices.Screen.getScrollLeft(),i.y+=Motif.Ui.Devices.Screen.getScrollTop();var n=Motif.Ui.Utility.getStyleDimension(t);if(0==n.w||0==n.h){n=Motif.Ui.Utility.getClientDimension(t),(0==n.w||0==n.h)&&(n=Motif.Ui.Utility.getOffsetDimension(t));var o=Motif.Ui.Utility.getPaddingSize(t),l=Motif.Ui.Utility.getBorderSize(t);n.w=n.w-o.left-o.right-l.left-l.right,n.h=n.h-o.top-o.bottom-l.top-l.bottom}return t.style.display!=e.display&&(t.style.display=e.display,t.style.visibility=e.visibility),new Motif.Drawing.Rectangle({x:i.x,y:i.y,w:n.w,h:n.h})},getOuterRectangle:function(t){var e=Motif.Ui.Utility.getBorderSize(t),i=Motif.Ui.Utility.getPaddingSize(t),n=Motif.Ui.Utility.getRectangle(t);return n.inflateBy(e.left+e.right+i.left+i.right,e.top+e.bottom+i.top+i.bottom),n},getDimension:function(t){var e=Motif.Ui.Utility.getStyleDimension(t);if(0==e.w||0==e.h){e=Motif.Ui.Utility.getClientDimension(t),(0==e.w||0==e.h)&&(e=Motif.Ui.Utility.getOffsetDimension(t));var i=Motif.Ui.Utility.getPaddingSize(t),n=Motif.Ui.Utility.getBorderSize(t);e.w=e.w-i.left-i.right-n.left-n.right,e.h=e.h-i.top-i.bottom-n.top-n.bottom}return e},getOuterDimension:function(t){var e=Motif.Ui.Utility.getDimension(t),i=Motif.Ui.Utility.getPaddingSize(t),n=Motif.Ui.Utility.getBorderSize(t);return e.w=e.w+i.left+i.right+n.left+n.right,e.h=e.h+i.top+i.bottom+n.top+n.bottom,e},setRectangle:function(t,e){if(!Motif.Type.isElement(t))throw new Error("Motif.Ui.Utility.setRectangle: Incorrect parameter specified, expected HTMLElement");var i=[""];null==e.x||isNaN(e.x)||i.push("left:"+e.x.toString()+"px"),null==e.y||isNaN(e.y)||i.push("top:"+e.y.toString()+"px"),null==e.w||isNaN(e.w)||i.push("width:"+e.w.toString()+"px"),null==e.h||isNaN(e.h)||i.push("height:"+e.h.toString()+"px"),i.length>1&&(t.style.cssText+=i.join(";"))},centerElement:function(t){var e={x:0,y:0,w:0,h:0};e.w=t.clientWidth,e.h=t.clientHeight,e.x=Motif.Ui.Devices.Screen.getVisibleWidth()/2-e.w/2+Motif.Ui.Devices.Screen.getScrollLeft(),e.y=Motif.Ui.Devices.Screen.getVisibleHeight()/2-e.h/2+Motif.Ui.Devices.Screen.getScrollTop(),e.w=null,e.h=null,"absolute"!=t.style.position&&(t.style.position="absolute"),this.setRectangle(t,e)},getRectangle2:function(){if(!element||1!=element.nodeType)throw new Error("Motif.Ui.Utility.getRectangle: Supplied parameter is not a HTMLElement");var t={position:Motif.Ui.Css.getCurrentStyle(element,"position"),display:Motif.Ui.Css.getCurrentStyle(element,"display"),visibility:Motif.Ui.Css.getCurrentStyle(element,"visibility")};"none"==t.display&&(element.style.position="absolute",element.style.visibility="hidden",element.style.display="block");var e=Motif.Ui.Utility.getStyleRectangle(element);if(0==e.x||0==e.y||0==e.w||0==e.h){var i=Motif.Ui.Utility.getClientRectangle(element),n=Motif.Ui.Css.getPadding(element),o=Motif.Ui.Css.getMargin(element),l=Motif.Ui.Css.getBorder(element);0===e.x&&0!==i.x&&(e.x=i.x-o.left),0===e.y&&0!==i.y&&(e.y=i.y-o.top),0===e.w&&0!==i.w&&(e.w=i.w-(n.left+n.right+l.left+l.right)),0===e.h&&0!==i.h&&(e.h=i.h-(n.top+n.bottom+l.top+l.bottom))}"none"==t.display&&(element.style.position=t.position,element.style.visibility=t.visibility,element.style.display=t.display)},copyAttributes:function(t,e){Motif.Page.log.write("Motif.Ui.Utility.copyAttributes: Copying "+t.attributes.length.toString()+" attributes from source to target."),""!=t.style.cssText&&(e.style.cssText=t.style.cssText);for(var i=0;i<t.attributes.length;i++){var n=t.attributes[i].nodeName,o=t.attributes[i].nodeValue;if(null!=o)switch(n.toLowerCase()){case"class":e.className=o;break;case"id":break;case"style":e.style.cssText=o;break;case"maxlength":e.maxLength=parseInt(o);default:if("on"==n.toLowerCase().substr(0,2))try{Motif.Utility.attachEvent(e,n,new Function(o));break}catch(l){Motif.Page.log.write("Motif.Ui.Utilityity.copyAttributes: Failed to attach event "+n+".")}e.setAttribute(n,o)}}},createSwfObject:function(t,i){t||(t={}),i||(i={}),i.movie=i.src||t.data||i.movie,i.allowscriptaccess="always",i.src&&delete i.src,t.name=t.name||t.id,t.name||(t.id="swf"+Motif.Ui.Utility._swfObjects.length.toString(),t.name=t.id),t.data=i.movie,t.type="application/x-shockwave-flash",t.pluginspage="http://www.macromedia.com/go/getflashplayer",t.classid&&delete t.classid;var n=document.createElement("object"),o=[],l=[];for(e in t)t[e]!=Object.prototype[e]&&(n.setAttribute(e,t[e]),o.push(e+'="'+t[e]+'"'));for(e in i)if(i[e]!=Object.prototype[e]){var s=document.createElement("param");s.setAttribute("name",e),s.setAttribute("value",i[e]),n.appendChild(s),l.push('<param name="'+e+'" value="'+i[e]+'"></param>')}if(Motif.BrowserInfo.internetExplorer){if(!this._swfContainer){var r=document.createElement("div");r.style.display="none",document.body.appendChild(r),this._swfContainer=r}this._swfContainer.innerHTML="<object "+o.join(" ")+">"+l.join("")+"</object>",n=document.getElementById(t.id)}return 0==Motif.Ui.Utility._swfObjects.length&&Motif.Utility.attachEvent(window,"onunload",Motif.Ui.Utility._removeSwfObjects),Motif.Ui.Utility._swfObjects.push(n),n},_removeSwfObjects:function(){for(var t=0;t<Motif.Ui.Utility._swfObjects.length;t++){var i=Motif.Ui.Utility._swfObjects[t];for(e in i)"function"==typeof i[e]&&(i[e]=null);i&&i.parentNode&&i.parentNode.removeChild(i)}Motif.Ui.Utility._swfObjects.splice(0,Motif.Ui.Utility._swfObjects.length)}};
Motif.Page.include("Motif.Drawing.Rectangle.js"),Motif.Page.include("Motif.Drawing.Point.js"),Motif.Ui.Devices.Screen={scrollX:0,scrollY:0,w:0,h:0,trackers:{},trackerCount:0,register:function(e){0==Motif.Ui.Devices.Screen.trackerCount&&Motif.Ui.Devices.Screen._attachEvents();var t="tracker"+e.ptr.toString();t in Motif.Ui.Devices.Screen.trackers||(Motif.Ui.Devices.Screen.trackers[t]=e,Motif.Ui.Devices.Screen.trackerCount++)},unregister:function(e){var t="tracker"+e.ptr.toString();t in Motif.Ui.Devices.Screen.trackers&&(delete Motif.Ui.Devices.Screen.trackers[t],Motif.Ui.Devices.Screen.trackerCount--,0==Motif.Ui.Devices.Screen.trackerCount&&Motif.Ui.Devices.Screen._detachEvents())},_attachEvents:function(){Motif.Page.log.write("Motif.Ui.Devices.Screen._attachEvents: Attaching events."),Motif.Utility.attachEvent(window,"onresize",Motif.Ui.Devices.Screen._windowResize),Motif.Utility.attachEvent(window,"onscroll",Motif.Ui.Devices.Screen._windowScroll)},_detachEvents:function(){Motif.Page.log.write("Motif.Ui.Devices.Screen._detachEvents: Detaching events."),Motif.Utility.detachEvent(document.body,"onresize",Motif.Ui.Devices.Screen._windowResize),Motif.Utility.detachEvent(window,"onscroll",Motif.Ui.Devices.Screen._windowScroll)},_windowResize:function(e){Motif.Page.log.write("Motif.Ui.Devices.Screen._windowResize: ");var t={w:this.getTotalWidth(),h:this.getTotalHeight()};if(Motif.Ui.Devices.Screen.w!==t.w||Motif.Ui.Devices.Screen.h!==t.h)for(e in Motif.Ui.Devices.Screen.trackers)Motif.Ui.Devices.Screen.trackers[e].resize(t.w,t.h)},_windowScroll:function(e){Motif.Page.log.write("Motif.Ui.Devices.Screen._windowScroll: ");var t={x:this.getScrollLeft(),y:this.getScrollTop()};if(Motif.Ui.Devices.Screen.scrollX!==t.x||Motif.Ui.Devices.Screen.scrollY!==t.y)for(e in Motif.Ui.Devices.Screen.trackers)Motif.Ui.Devices.Screen.trackers[e].scroll(t.w,t.h)},getScrollTop:function(){return document.documentElement.scrollTop?document.documentElement.scrollTop:window.pageYOffset?window.pageYOffset:0},getScrollLeft:function(){return document.documentElement.scrollLeft?document.documentElement.scrollLeft:window.pageXOffset?window.pageXOffset:0},getVisibleWidth:function(){return 0==Motif.Ui.Devices.Screen.getScrollLeft()?Motif.Ui.Devices.Screen.getTotalWidth():document.documentElement.clientWidth},getVisibleHeight:function(){return 0==Motif.Ui.Devices.Screen.getScrollTop()?Motif.Ui.Devices.Screen.getTotalHeight():document.documentElement.clientHeight},_getBodyWidth:function(){return document.body.clientWidth},_getBodyHeight:function(){return document.body.clientHeight},_getDocumentWidth:function(){return document.documentElement.clientWidth},_getDocumentHeight:function(){return document.documentElement.clientHeight},getTotalWidth:function(){var e=this._getBodyWidth(),t=this._getDocumentWidth();return e>t?e:t},getTotalHeight:function(){var e=this._getBodyHeight(),t=this._getDocumentHeight();return e>t?e:t},getTotalCenter:function(){var e=Motif.Ui.Devices.Screen.getTotalRectangle();return e.getCenter()},getVisibleCenter:function(){var e=Motif.Ui.Devices.Screen.getVisibleRectangle();return e.getCenter()},getTotalRectangle:function(){return new Motif.Drawing.Rectangle({x:0,y:0,w:Motif.Ui.Devices.Screen.getTotalWidth(),h:Motif.Ui.Devices.Screen.getTotalHeight()})},getVisibleRectangle:function(){return new Motif.Drawing.Rectangle({x:Motif.Ui.Devices.Screen.getScrollLeft(),y:Motif.Ui.Devices.Screen.getScrollTop(),w:Motif.Ui.Devices.Screen.getVisibleWidth(),h:Motif.Ui.Devices.Screen.getVisibleHeight()})}},Motif.Ui.Devices.ScreenTracker=function(e){Motif.Utility.extend(this,"Motif.Object"),this.__class.push("Motif.Ui.Devices.ScreenTracker"),this.scrollX=0,this.scrollY=0,this.w=0,this.h=0,this.isTracking=!1,this.start=function(){this.fireEvent("onbeforestart"),Motif.Ui.Devices.Screen.register(this),this.isTracking=!0,this.fireEvent("onstart")},this.stop=function(){this.isTracking!==!1&&(this.fireEvent("onbeforestop"),Motif.Ui.Devices.Screen.unregister(this),this.isTracking=!1,this.fireEvent("onstop"))},this.resize=function(e,t){(e!==this.w||t!==this.h)&&(this.fireEvent("onbeforeresize",[this.w,this.h,e,t]),this.w=e,this.h=t,this.fireEvent("onresize",[this.w,this.h]))},this.scroll=function(e,t){(e!==this.scrollX||t!==this.scrollY)&&(this.fireEvent("onbeforerescroll",[this.scrollX,this.scrollY,e,t]),this.scrollX=e,this.scrollY=t,this.fireEvent("onscroll",[this.scrollX,this.scrollY]))},this.onbeforestart=function(){},this.onstart=function(){},this.onbeforestop=function(){},this.onstop=function(){},this.onbeforeresize=function(e,t,i,n){},this.onresize=function(e,t){},this.onbeforescroll=function(e,t,i,n){},this.onscroll=function(e,t){},this.main=function(e){e&&this.configure(e)},this.main(e)};
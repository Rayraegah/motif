Motif.Page.include("Motif.Ui.Controls.Control.js"),Motif.Page.include("Motif.Dom.Utility.js"),Motif.Page.include("Motif.Ui.Devices.Mouse.js"),Motif.Ui.Controls.SplitPane=function(t){Motif.Utility.extend(this,"Motif.Ui.Controls.Control"),this.__class.push("Motif.Ui.Controls.SplitPane"),this._handlers={},this._mouseTracker=new Motif.Ui.Devices.MouseTracker,this.splitPaneType=Motif.Ui.Controls.SplitPaneType.Horizontal,this.splitterSize=6,this.firstPane=null,this.secondPane=null,this.splitter=null,this.setElement=function(t){this.Motif$Ui$Controls$Control.setElement(t),this._setCells()},this.load=function(t){var e=this.createElement();null!=t.parentNode&&t.parentNode.replaceChild(e,t),Motif.Ui.Utility.copyAttributes(t,e),e.removeAttribute("motifClass");var i={first:Motif.Dom.Utility.getElementsByClassName(t,"First")[0],second:Motif.Dom.Utility.getElementsByClassName(t,"Second")[0]},s={first:Motif.Dom.Utility.getElementsByClassName(e,"First")[0],second:Motif.Dom.Utility.getElementsByClassName(e,"Second")[0]};if(i.first){Motif.Ui.Utility.copyAttributes(i.first,s.first);for(var n=0;n<i.first.childNodes.length;n++)s.first.appendChild(i.first.childNodes[n])}if(i.second){Motif.Ui.Utility.copyAttributes(i.second,s.second);for(var n=0;n<i.second.childNodes.length;n++)s.second.appendChild(i.second.childNodes[n])}return t=e,this.Motif$Ui$Controls$Control.load(t),t},this.configure=function(t){t=this.Motif$Ui$Controls$Control.configure(t),t.type===Motif.Ui.Controls.SplitPaneType.Horizontal&&this.setSplitPaneType(Motif.Ui.Controls.SplitPaneType.Horizontal),t.type===Motif.Ui.Controls.SplitPaneType.Vertical&&this.setSplitPaneType(Motif.Ui.Controls.SplitPaneType.Vertical)},this.createElement=function(){var t=document.createElement("table");t.cellSpacing=t.cellPadding=0;var e=t.appendChild(document.createElement("tbody")),i=e.appendChild(document.createElement("tr")),s=i.appendChild(document.createElement("td"));return s.className="First",i=e.appendChild(document.createElement("tr")),s=i.appendChild(document.createElement("td")),s.className="Splitter",i=e.appendChild(document.createElement("tr")),s=i.appendChild(document.createElement("td")),s.className="Second",t},this.setSplitterSize=function(t){if(t=parseInt(t),isNaN(t))throw new Error("Motif.Ui.Controls.SplitPane.setSplitterSize: Incorrect parameter specified.");t!==this.splitterSize&&(this.fireEvent("onbeforesplittersizechange",[t,this.splitterSize]),this.splitterSize=t,this.splitter&&(this.splitPaneType===Motif.Ui.Controls.SplitPaneType.Horizontal?this.splitter.style.height=this.splitterSize.toString()+"px":this.splitter.style.width=this.splitterSize.toString()+"px"),this.fireEvent("onsplittersizechange",[this.splitterSize]))},this.setSplitPaneType=function(t){var i=!1;for(e in Motif.Ui.Controls.SplitPaneType)if(Motif.Ui.Controls.SplitPaneType[e]===t){i=!0;break}if(i===!1)throw new Error("Motif.Ui.Controls.SplitPane.setSplitPaneType: Incorrect parameter specified, expected Motif.Ui.Controls.SplitPaneType.");t!==this.splitPaneType&&(this.fireEvent("onbeforetypechange",[t,this.splitPaneType]),this.splitPaneType=t,this._setCells(),this.fireEvent("ontypechange",[this.splitPaneType]))},this._setCells=function(){if(null!=this.element){var t={first:Motif.Dom.Utility.getElementsByClassName(this.element,"First")[0],splitter:Motif.Dom.Utility.getElementsByClassName(this.element,"Splitter")[0],second:Motif.Dom.Utility.getElementsByClassName(this.element,"Second")[0]};for(e in t)if("undefined"==typeof t[e])return;for(e in t)t[e]=t[e].parentNode.removeChild(t[e]);for(var i=Motif.Dom.Utility.getChildElements(this.element,"tbody")[0];i.childNodes.length>0;)i.removeChild(i.childNodes[0]);if(Motif.Utility.detachEvent(t.splitter,"onmousedown",this._handlers.mousedownSplitter),Motif.Utility.attachEvent(t.splitter,"onmousedown",this._handlers.mousedownSplitter),t.splitter.ondragstart=t.splitter.onselectstart=t.splitter.ondraggesture=function(){return!1},this.splitPaneType===Motif.Ui.Controls.SplitPaneType.Horizontal){t.splitter.style.height=this.splitterSize.toString()+"px",t.splitter.style.cursor="n-resize";for(e in t){var s=i.appendChild(document.createElement("tr"));s.appendChild(t[e])}var n={total:this.getHeight(),splitter:this.splitterSize,first:parseInt(Motif.Ui.Css.getCurrentStyle(t.first,"height")),second:parseInt(Motif.Ui.Css.getCurrentStyle(t.second,"height"))};(isNaN(n.first)&&isNaN(n.second)||n.first==n.second&&n.first+n.second+n.splitter!=n.total)&&(n.first=Math.ceil((n.total-n.splitter)/2),n.second=Math.floor((n.total-n.splitter)/2));var o=0;for(e in n)isNaN(n[e])&&(n[e]=20,o+=n[e]);n.total!=2*o&&(n.second=n.total-(n.first+n.splitter)),t.first.style.height=n.first.toString()+"px",t.second.style.height=n.second.toString()+"px",Motif.Page.log.write("Motif.Ui.Controls.SplitPane._setCells: Setting cell height using: total="+n.total.toString()+"; first="+n.first.toString()+"; second="+n.second.toString()+";")}else{t.splitter.style.width=this.splitterSize.toString()+"px",t.splitter.style.cursor="e-resize";var s=i.appendChild(document.createElement("tr"));for(e in t)s.appendChild(t[e]);var r=this.getWidth(),l=parseInt(Motif.Ui.Css.getCurrentStyle(t.first,"width")),a=parseInt(Motif.Ui.Css.getCurrentStyle(t.second,"width"));Motif.Page.log.write("Motif.Ui.Controls.SplitPane._setCells: Setting cell width using totalWidth="+r.toString()+"; firstPaneWidth="+l.toString()+"; secondPaneWidth="+a.toString()+";"),!isNaN(l)&&l>0?t.second.style.width=(r-l-this.splitterSize).toString()+"px":!isNaN(a)&&a>0?t.first.style.width=(r-a-this.splitterSize).toString()+"px":(t.first.style.width=Math.ceil((r-this.splitterSize)/2).toString()+"px",t.second.style.width=Math.floor((r-this.splitterSize)/2).toString()+"px")}this.firstPane=t.first,this.splitter=t.splitter,this.secondPane=t.second}},this._mousedownSplitter=function(t){this.splitter.focus(),this._oldCursor=document.body.style.cursor,document.body.style.cursor=this.splitter.style.cursor,this._mouseTracker.start(t)},this._mousePositionChange=function(t,e,i,s,n,o){if(this.splitPaneType===Motif.Ui.Controls.SplitPaneType.Horizontal){var r=parseInt(this.firstPane.style.height)+o,l=parseInt(this.secondPane.style.height)-o;if(isNaN(r)||isNaN(l)||20>=r||20>=l)return;this.firstPane.style.height=r.toString()+"px",this.secondPane.style.height=l.toString()+"px"}else{var a=parseInt(Motif.Ui.Css.getCurrentStyle(this.firstPane,"width"))+n,h=parseInt(Motif.Ui.Css.getCurrentStyle(this.secondPane,"width"))-n;if(isNaN(a)||isNaN(h)||5>=a||5>=h)return;this.firstPane.style.width=a.toString()+"px",this.secondPane.style.width=h.toString()+"px"}},this._mouseButtonChange=function(){document.body.style.cursor=this._oldCursor,this._mouseTracker.stop()},this.main=function(t){t&&this.configure(t),this._handlers.mousedownSplitter=new Function("e","e=e||event; "+this.referenceString()+"._mousedownSplitter(e);"),this._handlers.mouseButtonChange=new Function(this.referenceString()+"._mouseButtonChange();"),this._handlers.mousePositionChange=new Function("oldx","oldy","newx","newy","diffx","diffy",this.referenceString()+"._mousePositionChange(oldx, oldy, newx, newy, diffx, diffy);"),this._mouseTracker.attachEvent("onpositionchange",this._handlers.mousePositionChange),this._mouseTracker.attachEvent("onbuttonchange",this._handlers.mouseButtonChange)},this.main(t)},Motif.Ui.Controls.SplitPaneType={Horizontal:0,Vertical:1};
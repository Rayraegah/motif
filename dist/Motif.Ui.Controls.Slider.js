Motif.Page.include("Motif.Ui.Controls.Control.js"),Motif.Page.include("Motif.Ui.Devices.Mouse.js"),Motif.Page.include("Motif.Ui.Css.js"),Motif.Ui.Controls.Slider=function(t){Motif.Utility.extend(this,"Motif.Ui.Controls.Control"),this.__class.push("Motif.Ui.Controls.Slider"),this._mouseTracker=new Motif.Ui.Devices.MouseTracker,this.handle=null,this.range=null,this.value=null,this.status=-1,this.type=Motif.Ui.Controls.SliderType.Horizontal,this.setRange=function(t){if(!Motif.Type.isArray(t))throw new Error("Motif.Ui.Controls.Slider.setRange: Incorrect parameter specified, expected Array.");this.range=t,this.reset()},this.reset=function(){this.setStatus(0)},this.setValue=function(t){this.setStatus(this.getStatusByValue(t))},this.getValue=function(){return this.value},this.setStatus=function(t){if(!Motif.Type.isNumber(t))throw new Error("Motif.Ui.Controls.Slider.setStatus: Incorrect parameter specified, expected Number.");if(0>t||t>100)throw new Error("Motif.Ui.Controls.Slider.setStatus: Incorrect parameter specified, out of range.");if(t!==this.status){var e=this.fireEvent("onbeforestatuschange",[this.status,t]);if(e!==!0){if(this.type==Motif.Ui.Controls.SliderType.Horizontal){var i=this.getWidth(),s=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"width")),n=parseInt(t*i/100)-parseInt(s/2);this.handle.style.left=n.toString()+"px"}if(this.type==Motif.Ui.Controls.SliderType.Vertical){var r=this.getHeight(),o=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"height")),a=parseInt(-1*(t-100)*r/100)-parseInt(o/2);this.handle.style.top=a.toString()+"px"}this.status=t;var h=status;Motif.Type.isArray(this.range)&&(h=this.range[this.getIndexByStatus(t)]),h!=this.value&&(this.fireEvent("onbeforechange",[this.value,h]),this.value=h,this.fireEvent("onchange",[this.value])),this.fireEvent("onstatuschange",[this.status])}}},this.getStatus=function(t){var e=0;if(this.type==Motif.Ui.Controls.SliderType.Horizontal){var i=this.getWidth();t="undefined"==typeof t?parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"left")):t;var s=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"width"));e=(t+s/2)/(i/100)}if(this.type==Motif.Ui.Controls.SliderType.Vertical){var n=this.getHeight();t="undefined"==typeof t?parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"top")):t;var r=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"height"));e=(t+r/2)/(n/100),e=-1*(e-100)}return e},this.getIndexByStatus=function(t){if(!Motif.Type.isArray(this.range))return-1;t="undefined"==typeof t?this.status:t;var e=100/(this.range.length-1);return t%e>e/2?Math.ceil(t/e):Math.floor(t/e)},this.getIndexByValue=function(t){if(!Motif.Type.isArray(this.range))return-1;for(var e=0;e<this.range.length;e++)if(this.range[e]===t)return e;return-1},this.getStatusByIndex=function(t){return Motif.Type.isArray(this.range)?(t=0>t?0:t>this.range.length-1?this.range.length-1:t,100/(this.range.length-1)*t):0},this.getStatusByValue=function(t){return Motif.Type.isArray(this.range)?this.getStatusByIndex(this.getIndexByValue(t)):(t=parseFloat(t),0>t?0:t>100?100:t)},this.configure=function(t){if(Motif.Page.log.write("Motif.Ui.Controls.Slider.configure: Configuring menu item."),t=this.Motif$Ui$Controls$Control.configure(t),t.type&&(this.type=t.type),t.range&&(Motif.Type.isArray(t.range)&&this.setRange(t.range),Motif.Type.isString(t.range)&&t.range.indexOf("-"))){for(var e=t.range.split("-"),i=parseInt(e[0]),s=parseInt(e[1]),n=[],r=i;s>=r;r++)n.push(r);this.setRange(n)}return t.value&&this.setValue(t.value),t},this.setElement=function(t){return t=this.Motif$Ui$Controls$Control.setElement(t),t.tabIndex=-1,t.appendChild(this.handle),Motif.Utility.attachEvent(this.element,"onclick",new Function("e","e=e||event; "+this.referenceString()+"._mouseClick(e);")),t},this._mouseClick=function(t){if(this._mouseTracker.isTracking!==!0){var e=Motif.Ui.Utility.getOffsetPoint(this.element),i=0;if(this.type==Motif.Ui.Controls.SliderType.Horizontal){var s=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"width"));i=this.getStatus(t.clientX-e.x-parseInt(s))}if(this.type==Motif.Ui.Controls.SliderType.Vertical){var n=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"height"));i=this.getStatus(t.clientY-e.y-parseInt(n))}i=i>100?100:0>i?0:i,this.setStatus(i)}},this._mouseDown=function(t){this._mouseTracker.start(t),this._rect=this.getRectangle(this.element)},this._positionChange=function(t,e,i,s,n,r){var o=0;if(this.type==Motif.Ui.Controls.SliderType.Horizontal)if(i>this._rect.x+this._rect.w)o=100;else if(i<this._rect.x)o=0;else{var a=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"width"));o=this.getStatus(i-this._rect.x-parseInt(a/2))}if(this.type==Motif.Ui.Controls.SliderType.Vertical)if(s>this._rect.y+this._rect.h)o=100;else if(s<this._rect.y)o=0;else{var h=parseInt(Motif.Ui.Css.getCurrentStyle(this.handle,"height"));o=this.getStatus(s-this._rect.y-parseInt(h/2))}this.setStatus(o)},this._buttonChange=function(){this._mouseTracker.stop()},this.onbeforestatuschange=function(t,e){},this.onstatuschange=function(t){},this.onbeforechange=function(t,e){},this.onchange=function(t){},this.main=function(t){this.handle=document.createElement("div"),this.handle.className="Handle",this.handle.tabIndex=-1,this.handle.style.MozUserSelect="none",this.attachEvent("onfocus",function(){this.handle.focus()}),this._mouseTracker.attachEvent("onpositionchange",new Function("oldx","oldy","newx","newy","diffx","diffy",this.referenceString()+"._positionChange(oldx, oldy, newx, newy, diffx, diffy);")),this._mouseTracker.attachEvent("onbuttonchange",new Function(this.referenceString()+"._buttonChange();")),Motif.Utility.attachEvent(this.handle,"ondragstart",new Function("e","e=e||event; e.cancelBubble=true; return false;")),Motif.Utility.attachEvent(this.handle,"onmousedown",new Function("e","e=e||event; "+this.referenceString()+"._mouseDown(e);")),t&&this.configure(t)},this.main(t)},Motif.Ui.Controls.SliderType={Horizontal:0,Vertical:1};
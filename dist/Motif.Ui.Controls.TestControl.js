Motif.Page.include("Motif.Ui.Controls.Control.js"),Motif.Page.include("Motif.Ui.Devices.Mouse.js"),Motif.Page.include("Motif.Drawing.Rectangle.js"),Motif.Ui.Controls.TestControl=function(t){Motif.Utility.extend(this,"Motif.Ui.Controls.Control"),this.handleSize=8,this.isMovable=!0,this.isResizable=!0,this._mouseTracker=new Motif.Ui.Devices.MouseTracker,this._mouseGrid=null,this._mouseAction="",this._mouseRect=null,this._elementMousedown=function(e){""!=this._mouseAction&&this._mouseTracker.start(e)},this._elementMouseout=function(e){this._mouseTracker.isTracking||this.setMouseAction("")},this._elementMousemove=function(t){if(!this._mouseTracker.isTracking){if(null==this._mouseRect&&(this._mouseRect=this.getRectangle()),null==this._mouseGrid){var i=this._mouseRect;this._mouseGrid={move:new Motif.Drawing.Rectangle({x:this.handleSize,y:this.handleSize,w:i.w-2*this.handleSize,h:i.h-2*this.handleSize}),n:new Motif.Drawing.Rectangle({x:this.handleSize,y:0,w:i.w-2*this.handleSize,h:this.handleSize}),ne:new Motif.Drawing.Rectangle({x:i.w-this.handleSize,y:0,w:this.handleSize,h:this.handleSize}),e:new Motif.Drawing.Rectangle({x:i.w-this.handleSize,y:this.handleSize,w:this.handleSize,h:i.h-2*this.handleSize}),se:new Motif.Drawing.Rectangle({x:i.w-this.handleSize,y:i.h-this.handleSize,w:this.handleSize,h:this.handleSize}),s:new Motif.Drawing.Rectangle({x:this.handleSize,y:i.h-this.handleSize,w:i.w-2*this.handleSize,h:this.handleSize}),sw:new Motif.Drawing.Rectangle({x:0,y:i.h-this.handleSize,w:this.handleSize,h:this.handleSize}),w:new Motif.Drawing.Rectangle({x:0,y:this.handleSize,w:this.handleSize,h:i.h-2*this.handleSize}),nw:new Motif.Drawing.Rectangle({x:0,y:0,w:this.handleSize,h:this.handleSize})}}var n={x:t.clientX-this._mouseRect.x,y:t.clientY-this._mouseRect.y},s="";for(e in this._mouseGrid)if(this._mouseGrid[e].containsPoint(n)){s=e;break}this.element.style.cursor="default",this.isMovable===!0&&"move"==s&&(this.element.style.cursor="move"),this.isResizable===!0&&""!=s&&"move"!=s&&(this.element.style.cursor=s+"-resize"),this.setMouseAction("default"==this.element.style.cursor?"":this.element.style.cursor)}},this.setMouseAction=function(e){this._mouseAction!=e&&(this.fireEvent("onbeforemouseactionchange",[this._mouseAction,e]),this._mouseAction=e,this.fireEvent("onmouseactionchange",[this._mouseAction]))},this._resize=function(){this.grid=null},this.setElement=function(e){this.Motif$Ui$Controls$Control.setElement(e),Motif.Utility.attachEvent(this.element,"onmousemove",this.handlers.ElementMousemove),Motif.Utility.attachEvent(this.element,"onmouseout",this.handlers.ElementMouseout),Motif.Utility.attachEvent(this.element,"onmousedown",this.handlers.ElementMousedown)},this._mouseTrackerStart=function(){this._backup={},this._backup.documentCursor=document.style.cursor,document.style.cursor=this.element.style.cursor},this.main=function(e){this.handlers={},this.handlers.ElementMousemove=new Function("e","e=e||event; "+this.referenceString()+"._elementMousemove(e);"),this.handlers.ElementMouseout=new Function("e","e=e||event; "+this.referenceString()+"._elementMouseout(e);"),this.handlers.ElementMousedown=new Function("e","e=e||event; "+this.referenceString()+"._elementMousedown(e);"),this.attachEvent("onmouseactionchange",function(e){Motif.Page.log.write("Mouse action changed to: "+e)}),this._mouseTracker.attachEvent("onbuttonchange",function(){this.stop()}),this._mouseTracker.attachEvent("onpositionchange",function(){Motif.Page.log.write("Tracker changed: "+this)}),this.configure(e)},this.main(t)};